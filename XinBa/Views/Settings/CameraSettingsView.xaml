<Page x:Class="XinBa.Views.Settings.CameraSettingsView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:prism="http://prismlibrary.com/"
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:settings="clr-namespace:XinBa.ViewModels.Settings"
      prism:ViewModelLocator.AutoWireViewModel="True"
      d:DataContext="{d:DesignInstance Type=settings:CameraSettingsViewModel}"
      mc:Ignorable="d"
      Title="Camera Settings" x:ClassModifier="internal">

    <StackPanel Margin="18" VerticalAlignment="Top">
        <!-- Title -->
        <TextBlock Text="Camera Connection Settings"
                   FontSize="20"
                   FontWeight="Bold"
                   Margin="0,0,0,20" />

        <!-- IP Address Settings -->
        <StackPanel Margin="0,0,0,10" HorizontalAlignment="Center">
            <TextBlock Text="Server IP Address"
                       FontWeight="Medium"
                       Margin="0,0,0,5" />
            <ui:TextBox Text="{Binding ServerIp, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Enter server IP address, e.g.: 192.168.1.100"
                        Width="300"
                        Margin="0,0,0,5" />
            <TextBlock Text="Camera service will connect to this IP address"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       FontSize="12" />
        </StackPanel>

        <!-- Port Settings -->
        <StackPanel Margin="0,10,0,10" HorizontalAlignment="Center">
            <TextBlock Text="Server Port"
                       FontWeight="Medium"
                       Margin="0,0,0,5" />
            <ui:TextBox Text="{Binding ServerPort, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Enter server port, e.g.: 8080"
                        Width="300"
                        Margin="0,0,0,5" />
            <TextBlock Text="Camera service will connect to this port"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       FontSize="12" />
        </StackPanel>

        <!-- Reconnect Interval Settings -->
        <StackPanel Margin="0,10,0,10" HorizontalAlignment="Center">
            <TextBlock Text="Reconnect Interval (ms)"
                       FontWeight="Medium"
                       Margin="0,0,0,5" />
            <ui:TextBox Text="{Binding ReconnectIntervalMs, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Enter reconnect interval, e.g.: 5000"
                        Width="300"
                        Margin="0,0,0,5" />
            <TextBlock Text="Time interval to retry connection after disconnection"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       FontSize="12" />
        </StackPanel>

        <!-- Connection Timeout Settings -->
        <StackPanel Margin="0,10,0,10" HorizontalAlignment="Center">
            <TextBlock Text="Connection Timeout (ms)"
                       FontWeight="Medium"
                       Margin="0,0,0,5" />
            <ui:TextBox Text="{Binding ConnectionTimeoutMs, UpdateSourceTrigger=PropertyChanged}"
                        PlaceholderText="Enter connection timeout, e.g.: 3000"
                        Width="300"
                        Margin="0,0,0,5" />
            <TextBlock Text="Maximum wait time for establishing a connection"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       FontSize="12" />
        </StackPanel>

        <!-- Image Save Path Settings -->
        <StackPanel Margin="0,10,0,10" HorizontalAlignment="Center">
            <TextBlock Text="Image Save Path"
                       FontWeight="Medium"
                       Margin="0,0,0,5" />
            <Grid Width="300">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <ui:TextBox Text="{Binding ImageSavePath, UpdateSourceTrigger=PropertyChanged}"
                            PlaceholderText="Select image save path"
                            IsReadOnly="True"
                            Grid.Column="0" />
                <ui:Button Content="Browse..."
                           Command="{Binding BrowseImagePathCommand}"
                           Grid.Column="1"
                           Margin="5,0,0,0" />
            </Grid>
            <TextBlock Text="Camera captured images will be saved to this path"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       FontSize="12" />
        </StackPanel>

        <!-- Status Message -->
        <TextBlock Text="{Binding StatusMessage}"
                   Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                   TextWrapping="Wrap"
                   HorizontalAlignment="Center"
                   Margin="0,20,0,0" />
    </StackPanel>
</Page>