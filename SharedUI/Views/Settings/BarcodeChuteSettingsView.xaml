<UserControl x:Class="SharedUI.Views.Settings.BarcodeChuteSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:settings="clr-namespace:SharedUI.ViewModels.Settings"
             xmlns:lex="https://github.com/XAMLMarkupExtensions/WPFLocalizationExtension"
             lex:LocalizeDictionary.DesignCulture="zh-CN"
             lex:ResxLocalizationProvider.DefaultAssembly="SharedUI"
             lex:ResxLocalizationProvider.DefaultDictionary="SharedUI.Resources.Strings"
             prism:ViewModelLocator.AutoWireViewModel="True"
             d:DataContext="{d:DesignInstance Type=settings:BarcodeChuteSettingsViewModel}"
             mc:Ignorable="d">

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel MaxWidth="500" Margin="16" VerticalAlignment="Top">
                <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_Title}"
                           Style="{DynamicResource SubtitleTextBlockStyle}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,16" />

                <!-- 基础设置 -->
                <ui:Card Margin="0,0,0,16">
                    <StackPanel Margin="16">
                        <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_BasicTitle}"
                                   Style="{DynamicResource SubtitleTextBlockStyle}"
                                   Margin="0,0,0,16" />

                        <!-- 格口数量 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_ChuteCount}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ui:NumberBox Grid.Column="1"
                                          Width="120"
                                          HorizontalAlignment="Left"
                                          Value="{Binding Configuration.ChuteCount, UpdateSourceTrigger=PropertyChanged}"
                                          ClearButtonEnabled="False" />
                        </Grid>

                        <!-- 异常格口 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_ErrorChute}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ui:NumberBox Grid.Column="1"
                                          Width="120"
                                          HorizontalAlignment="Left"
                                          Value="{Binding Configuration.ErrorChuteNumber, UpdateSourceTrigger=PropertyChanged}"
                                          ClearButtonEnabled="False" />
                        </Grid>

                        <!-- 超时格口 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_TimeoutChute}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ui:NumberBox Grid.Column="1"
                                          Width="120"
                                          HorizontalAlignment="Left"
                                          Value="{Binding Configuration.TimeoutChuteNumber, UpdateSourceTrigger=PropertyChanged}"
                                          ClearButtonEnabled="False" />
                        </Grid>

                        <!-- NoRead格口 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NoReadChute}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ui:NumberBox Grid.Column="1"
                                          Width="120"
                                          HorizontalAlignment="Left"
                                          Value="{Binding Configuration.NoReadChuteNumber, UpdateSourceTrigger=PropertyChanged}"
                                          ClearButtonEnabled="False" />
                        </Grid>

                        <!-- 重量不匹配格口 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_WeightMismatchChute}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ui:NumberBox Grid.Column="1"
                                          Width="120"
                                          HorizontalAlignment="Left"
                                          Value="{Binding Configuration.WeightMismatchChuteNumber, UpdateSourceTrigger=PropertyChanged}"
                                          ClearButtonEnabled="False" />
                        </Grid>
                    </StackPanel>
                </ui:Card>

                <!-- 规则设置 -->
                <ui:Card>
                    <StackPanel Margin="16">
                        <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_RuleTitle}"
                                   Style="{DynamicResource SubtitleTextBlockStyle}"
                                   Margin="0,0,0,16" />

                        <!-- 当前格口 -->
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_CurrentChute}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <ComboBox Grid.Column="1"
                                      Width="120"
                                      HorizontalAlignment="Left"
                                      ItemsSource="{Binding ChuteNumbers}"
                                      SelectedItem="{Binding SelectedChuteNumber}" />
                        </Grid>

                        <!-- 字符类型 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_CharType}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <StackPanel Grid.Column="1" Orientation="Horizontal">
                                <RadioButton Content="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_CharType_Digit}"
                                             IsChecked="{Binding CurrentRule.IsDigitOnly}"
                                             Margin="0,0,16,0" />
                                <RadioButton Content="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_CharType_Letter}"
                                             IsChecked="{Binding CurrentRule.IsLetterOnly}"
                                             Margin="0,0,16,0" />
                                <RadioButton Content="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_CharType_Alphanumeric}"
                                             IsChecked="{Binding CurrentRule.IsAlphanumeric}" />
                            </StackPanel>
                        </Grid>

                        <!-- 长度设置 -->
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_LengthRange}"
                                       Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,0" />

                            <Grid Grid.Column="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <ui:NumberBox Grid.Column="0"
                                              Width="120"
                                              HorizontalAlignment="Left"
                                              Value="{Binding CurrentRule.MinLength, UpdateSourceTrigger=PropertyChanged}"
                                              ClearButtonEnabled="False" />

                                <TextBlock Text="-"
                                           Grid.Column="1"
                                           Margin="8,0"
                                           VerticalAlignment="Center" />

                                <ui:NumberBox Grid.Column="2"
                                              Width="120"
                                              HorizontalAlignment="Left"
                                              Value="{Binding CurrentRule.MaxLength, UpdateSourceTrigger=PropertyChanged}"
                                              ClearButtonEnabled="False" />
                            </Grid>
                        </Grid>

                        <!-- 规则输入框 -->
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <!-- 起始字符 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_StartsWith}"
                                       Grid.Row="0" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="0" Grid.Column="1"
                                        Text="{Binding CurrentRule.StartsWith, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_StartsWith_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 结束字符 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_EndsWith}"
                                       Grid.Row="1" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="1" Grid.Column="1"
                                        Text="{Binding CurrentRule.EndsWith, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_EndsWith_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 起始非 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotStartsWith}"
                                       Grid.Row="2" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="2" Grid.Column="1"
                                        Text="{Binding CurrentRule.NotStartsWith, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotStartsWith_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 结束非 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotEndsWith}"
                                       Grid.Row="3" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="3" Grid.Column="1"
                                        Text="{Binding CurrentRule.NotEndsWith, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotEndsWith_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 内容包含 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_Contains}"
                                       Grid.Row="4" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="4" Grid.Column="1"
                                        Text="{Binding CurrentRule.Contains, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_Contains_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 内容不包含 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotContains}"
                                       Grid.Row="5" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="5" Grid.Column="1"
                                        Text="{Binding CurrentRule.NotContains, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_NotContains_Placeholder}"
                                        Margin="0,0,0,8" />

                            <!-- 正则表达式 -->
                            <TextBlock Text="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_RegexPattern}"
                                       Grid.Row="6" Grid.Column="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"
                                       Margin="0,0,8,8" />
                            <ui:TextBox Grid.Row="6" Grid.Column="1"
                                        Text="{Binding CurrentRule.RegexPattern, UpdateSourceTrigger=PropertyChanged}"
                                        PlaceholderText="{lex:Loc SharedUI:Strings:BarcodeChuteSettings_RegexPattern_Placeholder}"
                                        Margin="0,0,0,8" />
                        </Grid>
                    </StackPanel>
                </ui:Card>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>