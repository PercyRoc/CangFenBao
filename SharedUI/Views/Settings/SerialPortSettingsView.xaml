<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="SharedUI.Views.Settings.SerialPortSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewModels="clr-namespace:SharedUI.ViewModels"
             xmlns:prism="http://prismlibrary.com/"
             prism:ViewModelLocator.AutoWireViewModel="True"
             mc:Ignorable="d"
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance viewModels:SerialPortSettingsViewModel}">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 标题 -->
        <TextBlock Grid.Row="0" Text="串口通讯设置" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>

        <!-- 设置面板 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 端口 -->
            <TextBlock Grid.Row="0" Grid.Column="0" Text="端口:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                <ComboBox Width="150" ItemsSource="{Binding AvailablePorts}" 
                          SelectedItem="{Binding Settings.PortName}" 
                          Margin="0,0,10,10"/>
                <Button Content="刷新" Command="{Binding RefreshPortsCommand}" Padding="5,0" Margin="0,0,0,10"/>
            </StackPanel>

            <!-- 波特率 -->
            <TextBlock Grid.Row="1" Grid.Column="0" Text="波特率:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <ComboBox Grid.Row="1" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                      ItemsSource="{Binding AvailableBaudRates}" 
                      SelectedItem="{Binding Settings.BaudRate}" 
                      Margin="0,0,0,10"/>

            <!-- 数据位 -->
            <TextBlock Grid.Row="2" Grid.Column="0" Text="数据位:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <ComboBox Grid.Row="2" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                      ItemsSource="{Binding AvailableDataBits}" 
                      SelectedItem="{Binding Settings.DataBits}" 
                      Margin="0,0,0,10"/>

            <!-- 停止位 -->
            <TextBlock Grid.Row="3" Grid.Column="0" Text="停止位:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <ComboBox Grid.Row="3" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                      ItemsSource="{Binding AvailableStopBits}" 
                      SelectedItem="{Binding Settings.StopBits}" 
                      Margin="0,0,0,10"/>

            <!-- 校验方式 -->
            <TextBlock Grid.Row="4" Grid.Column="0" Text="校验方式:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <ComboBox Grid.Row="4" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                      ItemsSource="{Binding AvailableParity}" 
                      SelectedItem="{Binding Settings.Parity}" 
                      Margin="0,0,0,10"/>

            <!-- RTS -->
            <TextBlock Grid.Row="5" Grid.Column="0" Text="RTS信号:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <CheckBox Grid.Row="5" Grid.Column="1" Content="启用" 
                      IsChecked="{Binding Settings.RtsEnable}" 
                      VerticalAlignment="Center" 
                      Margin="0,0,0,10"/>

            <!-- DTR -->
            <TextBlock Grid.Row="6" Grid.Column="0" Text="DTR信号:" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <CheckBox Grid.Row="6" Grid.Column="1" Content="启用" 
                      IsChecked="{Binding Settings.DtrEnable}" 
                      VerticalAlignment="Center" 
                      Margin="0,0,0,10"/>

            <!-- 读取超时 -->
            <TextBlock Grid.Row="7" Grid.Column="0" Text="读取超时(ms):" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <TextBox Grid.Row="7" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                     Text="{Binding Settings.ReadTimeout}" 
                     Margin="0,0,0,10"/>

            <!-- 写入超时 -->
            <TextBlock Grid.Row="8" Grid.Column="0" Text="写入超时(ms):" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <TextBox Grid.Row="8" Grid.Column="1" Width="150" HorizontalAlignment="Left" 
                     Text="{Binding Settings.WriteTimeout}" 
                     Margin="0,0,0,10"/>
                     
            <!-- 命令延迟发送 -->
            <TextBlock Grid.Row="9" Grid.Column="0" Text="命令延迟(ms):" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,10,10"/>
            <StackPanel Grid.Row="9" Grid.Column="1" Orientation="Horizontal" Margin="0,0,0,10">
                <TextBox Width="150" HorizontalAlignment="Left" 
                         Text="{Binding Settings.CommandDelayMs}" />
                <TextBlock Text="命令触发后延迟一段时间再发送" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="Gray" FontSize="12"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl> 