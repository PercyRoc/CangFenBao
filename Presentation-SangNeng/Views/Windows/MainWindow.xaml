<ui:FluentWindow x:Class="Presentation_SangNeng.Views.Windows.MainWindow"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:windows="clr-namespace:Presentation_SangNeng.ViewModels.Windows"
                 xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                 xmlns:hc="https://handyorg.github.io/handycontrol"
                 mc:Ignorable="d"
                 d:DataContext="{d:DesignInstance Type=windows:MainWindowViewModel}"
                 Title="CangFenBao-SangNeng"
                 Height="900"
                 Width="1600"
                 Closing="MetroWindow_Closing"
                 WindowStartupLocation="CenterScreen"
                 ExtendsContentIntoTitleBar="True">

    <ui:FluentWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="pack://application:,,,/Presentation-CommonLibrary;component/Resources/Styles/DataGridStyles.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/Presentation-CommonLibrary;component/Resources/Styles/ColorStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />

            <!-- 添加SubtitleTextBlockStyle样式 -->
            <Style x:Key="SubtitleTextBlockStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}" />
            </Style>
        </ResourceDictionary>
    </ui:FluentWindow.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="32" />
            <RowDefinition Height="*" />
            <RowDefinition Height="28" />
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <Grid Grid.Row="0" Background="{StaticResource TitleBarGradient}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Settings Button -->
            <ui:Button Grid.Column="0"
                       Appearance="Primary"
                       Icon="Settings24"
                       Command="{Binding OpenSettingsCommand}"
                       Margin="0,0,8,0"
                       Padding="8,6"
                       ToolTip="System Settings">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="Settings24" Margin="0,0,8,0" />
                    <TextBlock Text="Settings" VerticalAlignment="Center" />
                </StackPanel>
            </ui:Button>

            <!-- History Button -->
            <ui:Button Grid.Column="1"
                       Appearance="Primary"
                       Icon="History24"
                       Command="{Binding OpenHistoryWindowCommand}"
                       Margin="0,0,8,0"
                       Padding="8,6"
                       ToolTip="Package History">
                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="History24" Margin="0,0,8,0" />
                    <TextBlock Text="History" VerticalAlignment="Center" />
                </StackPanel>
            </ui:Button>

            <!-- Title -->
            <TextBlock Grid.Column="2"
                       Text="Sunnen"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Margin="0,0,8,0"
                       FontSize="20"
                       FontWeight="SemiBold"
                       TextOptions.TextFormattingMode="Display"
                       Foreground="black"
                       TextOptions.TextRenderingMode="ClearType">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="4"
                                      Opacity="0.2"
                                      Direction="270"
                                      ShadowDepth="1" />
                </TextBlock.Effect>
            </TextBlock>

            <!-- TitleBar -->
            <ui:TitleBar Grid.Column="3"
                         Title=""
                         ButtonsForeground="#FF008891"
                         ShowMaximize="True"
                         ShowMinimize="True"
                         ShowClose="True" />

            <Border Grid.Column="0"
                    Grid.ColumnSpan="4"
                    Height="1"
                    VerticalAlignment="Bottom"
                    Background="#20008080"
                    BorderBrush="#40FFFFFF"
                    BorderThickness="0,0,0,1" />
        </Grid>

        <!-- Main Content Area -->
        <Grid Grid.Row="1" Background="{StaticResource MainBackground}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <!-- Left Panel -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Real-time Package Info -->
                <Border Grid.Row="0"
                        Style="{StaticResource CardStyle}"
                        Margin="16">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Title -->
                        <DockPanel Grid.Row="0" Margin="0,0,0,16">
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Symbol="Backpack24"
                                               Width="24"
                                               Height="24"
                                               Foreground="{DynamicResource AccentBrush}"
                                               VerticalAlignment="Center" />
                                <TextBlock Text="Real-time Package Info"
                                           Margin="8,0,0,0"
                                           FontSize="16"
                                           FontWeight="SemiBold"
                                           Foreground="{DynamicResource AccentBrush}"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Barcode Info -->
                        <StackPanel Grid.Row="1" Margin="0,0,0,16">
                            <TextBlock Text="Barcode"
                                       Margin="0,0,0,8"
                                       FontSize="14"
                                       FontWeight="SemiBold"
                                       Foreground="{DynamicResource AccentBrush}" />

                            <ui:TextBox Icon="Barcode24"
                                        Text="{Binding CurrentBarcode, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                        IsReadOnly="True"
                                        FontSize="20"
                                        FontWeight="Bold"
                                        Foreground="{StaticResource AccentBrush}"
                                        BorderBrush="Green"
                                        BorderThickness="2"
                                        PlaceholderText="Waiting for scan..." />
                        </StackPanel>

                        <!-- Info Cards Grid -->
                        <ItemsControl Grid.Row="2" ItemsSource="{Binding PackageInfoItems}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="2" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="4"
                                            Height="90"
                                            CornerRadius="8"
                                            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                            BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                            </Grid.RowDefinitions>

                                            <!-- Title and Icon -->
                                            <DockPanel Grid.Row="0" Margin="12,8,12,0">
                                                <TextBlock Text="{Binding Label}"
                                                           FontSize="12"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                                <Border CornerRadius="4"
                                                        Width="24"
                                                        Height="24"
                                                        HorizontalAlignment="Right">
                                                    <ui:SymbolIcon Symbol="{Binding Icon}"
                                                                   Width="14"
                                                                   Height="14"
                                                                   Foreground="White"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                </Border>
                                            </DockPanel>

                                            <!-- Value and Unit -->
                                            <StackPanel Grid.Row="1"
                                                        Margin="12,4,12,8"
                                                        VerticalAlignment="Center">
                                                <DockPanel>
                                                    <TextBlock Text="{Binding Value}"
                                                               FontSize="24"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                                    <TextBlock Text="{Binding Unit}"
                                                               FontSize="12"
                                                               Margin="4,0,0,0"
                                                               VerticalAlignment="Bottom"
                                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                                </DockPanel>
                                                <TextBlock Text="{Binding Description}"
                                                           FontSize="11"
                                                           Margin="0,4,0,0"
                                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </Border>

                <!-- Pallet Selection -->
                <Border Grid.Row="1"
                        Style="{StaticResource CardStyle}"
                        Margin="16,0,16,16">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Title -->
                        <DockPanel Grid.Row="0" Margin="0,0,0,12">
                            <ui:SymbolIcon Symbol="BoxMultiple24"
                                           Margin="0,0,8,0"
                                           Foreground="{StaticResource AccentBrush}"
                                           VerticalAlignment="Center" />
                            <TextBlock Text="Current Pallet"
                                       Style="{StaticResource SubtitleTextBlockStyle}"
                                       Foreground="{StaticResource AccentBrush}"
                                       VerticalAlignment="Center" />
                        </DockPanel>

                        <!-- Pallet List -->
                        <ItemsControl Grid.Row="1" ItemsSource="{Binding AvailablePallets}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <RadioButton GroupName="PalletSelection"
                                                 IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                                 Command="{Binding DataContext.SelectPalletCommand,
                                                       RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                 CommandParameter="{Binding}"
                                                 Margin="0,5,10,5">
                                        <Border Width="180"
                                                Padding="12,8"
                                                Background="{DynamicResource ControlFillColorDefaultBrush}"
                                                BorderBrush="{DynamicResource ControlElevationBorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="4">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <!-- 托盘名称 -->
                                                <TextBlock Grid.Row="0"
                                                           Text="{Binding Name}"
                                                           FontWeight="SemiBold"
                                                           FontSize="14"
                                                           Margin="0,0,0,8" />

                                                <!-- 托盘参数 -->
                                                <StackPanel Grid.Row="1" Orientation="Vertical">
                                                    <TextBlock FontSize="12" Margin="0,0,0,4">
                                                        <Run Text="Size: " />
                                                        <Run Text="{Binding Length, StringFormat='{}{0:F1}'}" />
                                                        <Run Text="×" />
                                                        <Run Text="{Binding Width, StringFormat='{}{0:F1}'}" />
                                                        <Run Text="×" />
                                                        <Run Text="{Binding Height, StringFormat='{}{0:F1}'}" />
                                                        <Run Text="cm" />
                                                    </TextBlock>
                                                    <TextBlock FontSize="12">
                                                        <Run Text="Weight: " />
                                                        <Run Text="{Binding Weight, StringFormat='{}{0:F3}'}" />
                                                        <Run Text="kg" />
                                                    </TextBlock>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </RadioButton>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </Border>

                <!-- Statistics Area -->
                <Border Grid.Row="2"
                        Style="{StaticResource CardStyle}"
                        Margin="16,0,16,16">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Title -->
                        <DockPanel Grid.Row="0">
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Symbol="ChartMultiple24"
                                               Width="24"
                                               Height="24"
                                               Foreground="{DynamicResource AccentBrush}"
                                               VerticalAlignment="Center" />
                                <TextBlock Text="Statistics"
                                           Style="{StaticResource SubtitleTextBlockStyle}"
                                           Margin="8,0,0,0"
                                           Foreground="{DynamicResource AccentBrush}"
                                           VerticalAlignment="Center" />
                            </StackPanel>
                        </DockPanel>

                        <!-- Statistics Cards Grid -->
                        <ItemsControl Grid.Row="1" ItemsSource="{Binding StatisticsItems}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <UniformGrid Columns="2" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="4"
                                            Height="100"
                                            CornerRadius="8"
                                            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                            BorderThickness="1">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>

                                            <!-- Title and Icon -->
                                            <DockPanel Grid.Row="0" Margin="12,8,12,0">
                                                <TextBlock Text="{Binding Label}"
                                                           FontSize="12"
                                                           FontWeight="SemiBold"
                                                           Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                                <Border CornerRadius="4"
                                                        Width="24"
                                                        Height="24"
                                                        HorizontalAlignment="Right">
                                                    <ui:SymbolIcon Symbol="{Binding Icon}"
                                                                   Width="14"
                                                                   Height="14"
                                                                   Foreground="White"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                </Border>
                                            </DockPanel>

                                            <!-- Value and Unit -->
                                            <StackPanel Grid.Row="1"
                                                        Margin="12,4,12,4"
                                                        VerticalAlignment="Center">
                                                <DockPanel>
                                                    <TextBlock Text="{Binding Value}"
                                                               FontSize="28"
                                                               FontWeight="SemiBold"
                                                               Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                                                    <TextBlock Text="{Binding Unit}"
                                                               FontSize="12"
                                                               Margin="4,0,0,0"
                                                               VerticalAlignment="Bottom"
                                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                                </DockPanel>
                                            </StackPanel>

                                            <!-- Description -->
                                            <TextBlock Grid.Row="2"
                                                       Text="{Binding Description}"
                                                       FontSize="11"
                                                       Margin="12,0,12,8"
                                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                                                       TextWrapping="Wrap" />
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </Grid>
                </Border>
            </Grid>

            <!-- Right Panel -->
            <Grid Grid.Row="0" Grid.Column="1" Margin="16,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Image Display Area -->
                <Border Grid.Row="0"
                        Style="{StaticResource CardStyle}"
                        Margin="16">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Title Bar -->
                        <StackPanel Grid.Row="0"
                                    Orientation="Horizontal"
                                    Margin="0,0,0,16">
                            <ui:SymbolIcon Symbol="Image24"
                                           Margin="0,0,8,0"
                                           Foreground="{StaticResource AccentBrush}"
                                           VerticalAlignment="Center" />
                            <TextBlock Text="Camera Images"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource AccentBrush}"
                                       VerticalAlignment="Center" />
                        </StackPanel>

                        <!-- Image Display Grid -->
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <!-- Hikvision Camera Image -->
                            <Border Grid.Column="0"
                                    Margin="0,0,8,0"
                                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="4">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0"
                                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                            BorderThickness="0,0,0,1"
                                            Padding="8,4">
                                        <DockPanel>
                                            <ui:SymbolIcon Symbol="Camera24"
                                                           Width="16"
                                                           Height="16"
                                                           Margin="0,0,8,0"
                                                           Foreground="{StaticResource AccentBrush}" />
                                            <TextBlock Text="Hikvision Camera"
                                                       FontSize="14"
                                                       FontWeight="SemiBold"
                                                       Foreground="{StaticResource AccentBrush}" />
                                        </DockPanel>
                                    </Border>

                                    <Image Grid.Row="1"
                                           Margin="8"
                                           Source="{Binding CurrentImage}"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           RenderOptions.EdgeMode="Aliased"
                                           Stretch="Uniform"
                                           StretchDirection="Both"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                                </Grid>
                            </Border>

                            <!-- Volume Camera Image -->
                            <Border Grid.Column="1"
                                    Margin="8,0,0,0"
                                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1"
                                    CornerRadius="4">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>

                                    <Border Grid.Row="0"
                                            Background="{DynamicResource ControlFillColorDefaultBrush}"
                                            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                                            BorderThickness="0,0,0,1"
                                            Padding="8,4">
                                        <DockPanel>
                                            <ui:SymbolIcon Symbol="Cube24"
                                                           Width="16"
                                                           Height="16"
                                                           Margin="0,0,8,0"
                                                           Foreground="{StaticResource AccentBrush}" />
                                            <TextBlock Text="Volume Camera"
                                                       FontSize="14"
                                                       FontWeight="SemiBold"
                                                       Foreground="{StaticResource AccentBrush}" />
                                        </DockPanel>
                                    </Border>

                                    <Image Grid.Row="1"
                                           Margin="8"
                                           Source="{Binding VolumeImage}"
                                           RenderOptions.BitmapScalingMode="HighQuality"
                                           RenderOptions.EdgeMode="Aliased"
                                           Stretch="Uniform"
                                           StretchDirection="Both"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center" />
                                </Grid>
                            </Border>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Package History -->
                <Border Grid.Row="1"
                        Style="{StaticResource CardStyle}"
                        Margin="16">
                    <Grid Margin="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>

                        <!-- Title Bar -->
                        <StackPanel Grid.Row="0"
                                    Orientation="Horizontal"
                                    Margin="0,0,0,8">
                            <ui:SymbolIcon Symbol="History24"
                                           Margin="0,0,8,0"
                                           VerticalAlignment="Center"
                                           Foreground="{StaticResource AccentBrush}" />
                            <TextBlock Text="Package History"
                                       Foreground="{StaticResource AccentBrush}"
                                       FontSize="16"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center" />
                        </StackPanel>

                        <!-- Data Grid -->
                        <DataGrid Grid.Row="1"
                                  Style="{DynamicResource DefaultDataGridStyle}"
                                  ColumnHeaderStyle="{DynamicResource DefaultDataGridColumnHeaderStyle}"
                                  CellStyle="{DynamicResource DefaultDataGridCellStyle}"
                                  RowStyle="{DynamicResource DefaultDataGridRowStyle}"
                                  ItemsSource="{Binding PackageHistory}"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  GridLinesVisibility="Horizontal">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="No." Binding="{Binding Index}" Width="60" />
                                <DataGridTextColumn Header="Barcode" Binding="{Binding Barcode}" Width="160" />
                                <DataGridTextColumn Header="Weight" Binding="{Binding WeightDisplay}" Width="80" />
                                <DataGridTextColumn Header="Size" Binding="{Binding VolumeDisplay}" Width="120" />
                                <DataGridTextColumn Header="Status" Binding="{Binding StatusDisplay}" Width="80" />
                                <DataGridTextColumn Header="Time"
                                                    Binding="{Binding CreateTime, StringFormat={}{0:HH:mm:ss}}"
                                                    Width="100" />
                                <DataGridTextColumn Header="Note" Binding="{Binding Information}" Width="*" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="2"
                Background="{StaticResource SecondaryBrush}"
                Opacity="0.8"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- CPU Status -->
                <StackPanel Grid.Column="0"
                            Orientation="Horizontal"
                            Margin="8,0">
                    <ui:SymbolIcon Symbol="DeviceEq24"
                                   FontSize="14"
                                   Margin="0,0,4,0"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                    <TextBlock Text="{Binding SystemStatus.CpuUsage, StringFormat=CPU: {0:F1}%}"
                               VerticalAlignment="Center"
                               FontSize="12"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                </StackPanel>

                <!-- Memory Status -->
                <StackPanel Grid.Column="1"
                            Orientation="Horizontal"
                            Margin="8,0">
                    <ui:SymbolIcon Symbol="Memory16"
                                   FontSize="14"
                                   Margin="0,0,4,0"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                    <TextBlock Text="{Binding SystemStatus.MemoryUsage, StringFormat=Memory: {0:F1}%}"
                               VerticalAlignment="Center"
                               FontSize="12"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                </StackPanel>

                <!-- Disk Status -->
                <ItemsControl Grid.Column="2"
                              ItemsSource="{Binding SystemStatus.Disks}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal"
                                        Margin="8,0"
                                        Visibility="{Binding IsReady, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <ui:SymbolIcon Symbol="HardDrive24"
                                               FontSize="14"
                                               Margin="0,0,4,0"
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                <TextBlock VerticalAlignment="Center"
                                           FontSize="12"
                                           Foreground="{DynamicResource TextFillColorSecondaryBrush}">
                                    <Run Text="{Binding Name, Mode=OneWay}" />
                                    <Run Text=": " />
                                    <Run Text="{Binding UsagePercentage, StringFormat={}{0:F1}%, Mode=OneWay}" />
                                </TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- Device Status -->
                <ItemsControl Grid.Column="4"
                              ItemsSource="{Binding DeviceStatuses}"
                              Margin="8,0">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal"
                                        Margin="8,0">
                                <ui:SymbolIcon Symbol="{Binding Icon}"
                                               FontSize="14"
                                               Margin="0,0,4,0"
                                               Foreground="{Binding StatusColor}" />
                                <TextBlock VerticalAlignment="Center"
                                           FontSize="12">
                                    <Run Text="{Binding Name}"
                                         Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                    <Run Text=": "
                                         Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                                    <Run Text="{Binding Status}"
                                         Foreground="{Binding StatusColor}" />
                                </TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- Running Time -->
                <StackPanel Grid.Column="5"
                            Orientation="Horizontal"
                            Margin="8,0">
                    <ui:SymbolIcon Symbol="Timer24"
                                   FontSize="14"
                                   Margin="0,0,4,0"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                    <TextBlock VerticalAlignment="Center"
                               FontSize="12"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}">
                        <Run Text="Running Time: " />
                        <Run Text="{Binding SystemStatus.RunningTime, Mode=OneWay, StringFormat={}{0:hh\\:mm\\:ss}}" />
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Growl Message Container -->
        <StackPanel Name="GrowlPanel"
                    Grid.Row="1"
                    hc:Growl.GrowlParent="True"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Right"
                    Margin="0,10,10,0"
                    Panel.ZIndex="1000" />
    </Grid>
</ui:FluentWindow>